<!DOCTYPE html>
<html>
<head>
    <title>MAKAUT Marks Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        form { display: inline-block; text-align: left; margin-top: 20px; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; }
        .form-section { display: none; }
    </style>
</head>
<body>
    <h1>MAKAUT Marks Calculator</h1>
    <form method="post" action="/calculate">
        <label for="option">Select an option:</label>
        <select name="option" id="option" onchange="showFields()">
            <option value="">-- Select --</option>
            <option value="sgpa_per">SGPA to Percentage</option>
            <option value="sgpa_back">SGPA with Backlogs</option>
            <option value="ygpa">YGPA</option>
            <option value="dgpa">DGPA</option>
            <option value="cgpa">CGPA</option>
        </select>

        <div id="sgpa_per" class="form-section">
            <label>SGPA:</label>
            <input type="number" name="sgpa" step="0.01">
        </div>

        <div id="sgpa_back" class="form-section">
            <label>Obtained Credits:</label>
            <input type="number" name="obtained_credits" step="0.01">
            <label>Total Credits:</label>
            <input type="number" name="total_credits" step="0.01">
        </div>

        <div id="ygpa" class="form-section">
            <label>Semester 1 SGPA:</label>
            <input type="number" name="sem1" step="0.01">
            <label>Semester 2 SGPA:</label>
            <input type="number" name="sem2" step="0.01">
        </div>

        <div id="dgpa" class="form-section">
            <label>Number of Years:</label>
            <input type="number" id="year" name="year" min="1" max="4" onchange="handleDGPAChange()">

            <div id="lateralEntrySection" style="display: none;">
                <label>Lateral Entry Student?</label>
                <select name="lateral" id="lateral">
                    <option value="">-- Select --</option>
                    <option value="Y">Yes</option>
                    <option value="N">No</option>
                </select>
            </div>

            <div id="ygpaInputs"></div>

            <label>Convert to Percentage?</label>
            <select name="convert">
                <option value="Y">Yes</option>
                <option value="N">No</option>
            </select>
        </div>

        <div id="cgpa" class="form-section">
            <label>Obtained Credits:</label>
            <input type="number" name="obtained_credits" step="0.01">
            <label>Total Credits:</label>
            <input type="number" name="total_credits" step="0.01">
        </div>

        <br>
        <input type="submit" value="Calculate">
    </form>

    <script>
        function showFields() {
            const sections = document.querySelectorAll('.form-section');
            sections.forEach(s => s.style.display = 'none');

            const selected = document.getElementById('option').value;
            const visibleSection = document.getElementById(selected);
            if (visibleSection) visibleSection.style.display = 'block';
        }

        function handleDGPAChange() {
            const year = parseInt(document.getElementById('year').value);
            const lateralSection = document.getElementById('lateralEntrySection');
            const ygpaContainer = document.getElementById('ygpaInputs');
            ygpaContainer.innerHTML = '';

            if (year === 4) {
                lateralSection.style.display = 'block';
            } else {
                lateralSection.style.display = 'none';
                for (let i = 1; i <= year; i++) {
                    ygpaContainer.innerHTML += `<label>YGPA ${i} Year:</label><input type="number" name="ygpa${i}" step="0.01">`;
                }
            }

            document.getElementById('lateral').onchange = function () {
                const lateral = this.value;
                ygpaContainer.innerHTML = '';

                if (lateral === 'Y') {
                    ['2nd', '3rd', '4th'].forEach((yr, idx) => {
                        ygpaContainer.innerHTML += `<label>YGPA ${yr} Year:</label><input type="number" name="ygpa${idx + 2}" step="0.01">`;
                    });
                } else if (lateral === 'N') {
                    ['1st', '2nd', '3rd', '4th'].forEach((yr, idx) => {
                        ygpaContainer.innerHTML += `<label>YGPA ${yr} Year:</label><input type="number" name="ygpa${idx + 1}" step="0.01">`;
                    });
                }
            };
        }
    </script>
</body>
</html>
